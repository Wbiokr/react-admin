webpackJsonp([7],{153:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=a(65),i=(a.n(r),a(10)),s=a(77),l=a(66),u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),d=antd,m=d.Input,f=d.Button,p=d.DatePicker,g=d.Table,h=d.Divider,y=d.Tag,b=d.Radio,k=d.notification,v=d.Modal,E=p.RangePicker,R=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={page:1,good_name:"",status:"",data:[],count:0,columns:[{title:"\u6dfb\u52a0\u65f6\u95f4",dataIndex:"created_time",key:"created_time"},{title:"\u5546\u54c1\u7f16\u53f7",dataIndex:"id",key:"id"},{title:"\u5546\u54c1\u540d\u79f0",key:"good_name",render:function(e){var t=e.good_name;return React.createElement("p",{style:{maxWidth:"200px"}},t)}},{title:"\u4ea7\u54c1\u5206\u7c7b",dataIndex:"category_name",key:"category_name"},{title:"\u5546\u54c1\u4ef7\u683c(\u5143)",dataIndex:"good_price",key:"good_price"},{title:"\u5269\u4f59\u5e93\u5b58(\u4ef6)",dataIndex:"remaining_in_stock",key:"remaining_in_stock",render:function(e){return e>=0?e:0}},{title:"\u9500\u552e\u6570\u91cf(\u4ef6)",dataIndex:"sale_count",key:"sale_count"},{title:"\u72b6\u6001",dataIndex:"status",key:"status",render:function(e){return React.createElement(y,{color:2==e?"green":"red"},2==e?"\u5df2\u4e0a\u67b6":"\u672a\u4e0a\u67b6")}},{title:"\u64cd\u4f5c",key:"action",render:function(e){var t=e.status,n=e.id;return React.createElement("span",null,React.createElement(s.b,{to:"/goods/edit/"+n},"\u4fee\u6539"),React.createElement(h,{type:"vertical"}),2==t?React.createElement("a",{onClick:function(){v.confirm({title:"\u4e0b\u67b6\u786e\u8ba4",content:"\u4e0b\u67b6\u540e\u7684\u4ea7\u54c1\u5c06\u4e0d\u5728\u5546\u57ce\u4e2d\u5c55\u793a\uff0c\u662f\u5426\u786e\u8ba4\u4e0b\u67b6\uff1f",okText:"\u662f",cancelText:"\u5426",okType:"warning",onOk:function(e){a.changeStatus(n,1,e)}})}},"\u4e0b\u67b6"):React.createElement("a",{onClick:function(){v.confirm({title:"\u4e0a\u67b6\u786e\u8ba4",content:"\u4e0a\u67b6\u540e\u7684\u4ea7\u54c1\u5c06\u5728\u5546\u57ce\u4e2d\u5c55\u793a\uff0c\u53ef\u4f9b\u7528\u6237\u5151\u6362\uff0c\u662f\u5426\u786e\u8ba4\u4e0a\u67b6\uff1f",okText:"\u662f",cancelText:"\u5426",okType:"warning",onOk:function(e){a.changeStatus(n,2,e)}})}},"\u4e0a\u67b6"))}}]},a}return c(t,e),u(t,[{key:"render",value:function(){var e=this;return React.createElement("div",null,React.createElement("section",{className:"p-30"},React.createElement("h3",{className:"f-s-16 c-blue h-35 b-d8d8d8 b-no-t b-no-lr"},"\u5546\u54c1\u5217\u8868")),React.createElement("section",{className:"p-30 d-f p-t-no"},React.createElement("div",{className:"m-r-20"},React.createElement("span",null,"\u6dfb\u52a0\u65f6\u95f4\uff1a"),React.createElement(E,{id:"rangePicker-goods",format:"YYYY-MM-DD",placeholder:["\u5f00\u59cb\u65f6\u95f4","\u7ed3\u675f\u65f6\u95f4"]})),React.createElement("div",{className:"m-r-50"},React.createElement("span",{className:"d-b w-90"},"\u5546\u54c1\u540d\u79f0\uff1a"),React.createElement(m,{style:{width:150},placeholder:"\u8bf7\u8f93\u5165...",defaultValue:this.state.good_name,onChange:function(t){e.setState({good_name:t.target.value})}})),React.createElement("div",null,React.createElement(f,{type:"primary",onClick:function(){e.getGoodsList.bind(e)(1)}},"\u67e5 \u8be2"))),React.createElement("section",{className:"h-20",style:{background:"#f0f2f5"}}),React.createElement("section",{className:"p-30"},React.createElement("div",{class:"d-f f-between-center p-b-20"},React.createElement(b.Group,{defaultValue:"all",buttonStyle:"solid",onChange:function(t){e.getGoodsList(1,t.target.value)}},React.createElement(b.Button,{value:"all"},"\u5168\u90e8"),React.createElement(b.Button,{value:"1"},"\u672a\u4e0a\u67b6"),React.createElement(b.Button,{value:"2"},"\u5df2\u4e0a\u67b6")),React.createElement(s.b,{to:"/goods/add"},"\u6dfb\u52a0\u5546\u54c1")),React.createElement(g,{columns:this.state.columns,dataSource:this.state.data,pagination:{position:"bottom",showQuickJumper:!0,defaultPageSize:10,total:this.state.count,onChange:function(t){e.getGoodsList.bind(e)(t)}}}),React.createElement("span",{className:"tran-y-40 d-block w-250"},"\u5171",this.state.count,"\u6761\u8bb0\u5f55 \u7b2c",this.state.page,"/",Math.ceil(this.state.count/10),"\u9875")))}},{key:"componentDidMount",value:function(){this.getGoodsList(1)}},{key:"getGoodsList",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments[1],n=a||this.state.status;n="all"==a?"":n,this.setState({status:n}),Object(l.p)({start_time:document.querySelector("#rangePicker-goods").querySelectorAll("input")[0].value,end_time:document.querySelector("#rangePicker-goods").querySelectorAll("input")[1].value,good_name:this.state.good_name,status:n,page:t,page_size:10}).then(function(a){1==a.status?e.setState({data:a.data,count:a.count,page:t}):k.error({message:a.msg||"\u5f02\u5e38\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u6216\u8054\u7cfb\u7ba1\u7406\u5458"})})}},{key:"changeStatus",value:function(e,t,a){var n=this;Object(l.w)({good_id:e,status:t}).then(function(o){if(1!=o.status)return void k.error({message:o.msg||(1==t?"\u4e0b\u67b6":"\u4e0a\u67b6")+"\u5931\u6557"});k.success({message:(1==t?"\u4e0b\u67b6":"\u4e0a\u67b6")+"\u6210\u529f"});var c=n.state.data;c.forEach(function(a){a.id==e&&(a.status=t)}),n.setState({data:c}),a()})}}]),t}(React.Component),_=function(e){return{state:123}},w=function(e){return{search:function(e){}}};t.default=Object(i.connect)(_,w)(R)}});