webpackJsonp([6],{156:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(66),i=n(65),s=n.n(i),u=n(10),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),f=antd,m=f.Button,g=f.Table,d=f.Tag,p=f.Divider,h=f.Modal,y=f.Input,b=(f.Popconfirm,f.Tooltip),k=f.InputNumber,v=f.notification,E=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={count:0,data:[],page:1,newType:"",updateType:"",columns:[{title:"\u5e8f\u53f7",dataIndex:"id",key:"id"},{title:"\u5546\u54c1\u7c7b\u522b",dataIndex:"category_name",key:"category_name"},{title:"\u7c7b\u522b\u6392\u5e8f",key:"weight",render:function(e){var t=e.weight,a=e.id;return React.createElement("a",{onClick:function(){var e=t;h.confirm({title:"\u4fee\u6539\u6743\u91cd",content:React.createElement(k,{min:0,max:99999999,defaultValue:e,onChange:function(t){e=parseInt(t)}}),onOk:function(t){""===String(e).trim()||"NaN"===String(e).trim()?v.warning({message:"\u8bf7\u8f93\u5165\u6743\u91cd"}):Object(r.h)({id:a,weight:e}).then(function(o){if(1==o.status){v.success({message:"\u4fee\u6539\u6210\u529f\uff01"});var c=n.state.data;c.forEach(function(t){t.id==a&&(t.weight=e)}),n.setState({data:c}),t()}else v.error({message:o.msg||"\u4fee\u6539\u5931\u8d25"})})}})}},React.createElement(b,{title:"\u70b9\u51fb\u4fee\u6539\u6743\u91cd"},t))}},{title:"\u72b6\u6001",dataIndex:"is_show",key:"is_show",render:function(e){return React.createElement(d,{color:1==e?"green":"red"},1==e?"\u5df2\u663e\u793a":"\u5df2\u9690\u85cf")}},{title:"\u64cd\u4f5c",key:"action",render:function(e){var t=e.is_show,a=e.category_name,o=e.id;return React.createElement("span",null,React.createElement("a",{onClick:function(){var e=a;h.confirm({title:"\u4fee\u6539\u7c7b\u522b",content:React.createElement("div",null,React.createElement("span",null,"\u5546\u54c1\u7c7b\u522b\uff1a"),React.createElement(y,{defaultValue:e,onChange:function(t){e=t.target.value.trim()}})),onText:"\u786e\u8ba4\u4fee\u6539",okType:"success",cancelText:"\u53d6\u6d88",onOk:function(t){if(""==e)return v.warning({message:"\u8bf7\u8f93\u5165\u7c7b\u522b\u65b0\u540d\u79f0"}),!1;Object(r.f)({category_name:e,id:o}).then(function(a){if(1==a.status){v.success({message:"\u606d\u559c\uff0c\u7c7b\u76ee\u4fee\u6539\u6210\u529f\uff01"});n.state.data.forEach(function(t){t.id==o&&(t.category_name=e)}),n.setState({category_name:e}),t()}else v.error({message:a.msg||"\u7f51\u7edc\u9519\u8bef"})})}})}},"\u4fee\u6539"),React.createElement(p,{type:"vertical"}),1==t?React.createElement("a",{onClick:function(){h.confirm({title:"\u64cd\u4f5c\u540e\uff0c\u5546\u54c1\u7c7b\u522b\u3010"+a+"\u3011\u5c06\u5728\u5546\u57ce\u4e2d\u9690\u85cf\uff0c\u786e\u8ba4\u9690\u85cf\uff1f",okText:"\u662f",cancelText:"\u5426",okType:"danger",onOk:function(e){n.categoryToggle(o,0,e)}})}},"\u5728\u5546\u57ce\u4e2d\u9690\u85cf"):React.createElement("a",{onClick:function(){h.confirm({title:"\u64cd\u4f5c\u540e\uff0c\u5546\u54c1\u7c7b\u522b\u3010"+a+"\u3011\u5c06\u5728\u5546\u57ce\u4e2d\u663e\u793a\uff0c\u786e\u8ba4\u663e\u793a\uff1f",okText:"\u662f",cancelText:"\u5426",okType:"primary",onOk:function(e){n.categoryToggle(o,1,e)}})}},"\u5728\u5546\u57ce\u4e2d\u663e\u793a"))}}]},n}return c(t,e),l(t,[{key:"render",value:function(){var e=this;return React.createElement("div",null,React.createElement("section",{className:"p-30"},React.createElement("h3",{className:"f-s-16 c-blue h-35 b-d8d8d8 b-no-t b-no-lr"},"\u5546\u54c1\u7c7b\u522b\u7ba1\u7406"),React.createElement("div",{className:"f-end-center p-b-20"},React.createElement(m,{type:"primary",onClick:function(){var t="";h.confirm({title:"\u6dfb\u52a0\u65b0\u7c7b\u522b",content:React.createElement("div",null,React.createElement("span",null,"\u5546\u54c1\u7c7b\u522b\uff1a"),React.createElement(y,{onChange:function(e){t=e.target.value.trim()},placeholder:"\u8bf7\u8f93\u5165\u7c7b\u522b\u540d\u79f0"})),onText:"\u786e\u8ba4\u6dfb\u52a0",okType:"success",cancelText:"\u53d6\u6d88",onOk:function(n){if(""==t.trim())return v.warning({message:"\u8bf7\u8f93\u5165\u8981\u6dfb\u52a0\u7c7b\u76ee"}),!1;Object(r.e)({category_name:t}).then(function(t){1==t.status?(v.success({message:"\u7c7b\u76ee\u6dfb\u52a0\u6210\u529f\uff0c\u66f4\u65b0\u7c7b\u76ee\u4e2d..."}),n(),e.getGoodCategory(1)):v.error({message:"\u8be5\u5546\u54c1\u7c7b\u76ee\u5df2\u5b58\u5728"})})}})}},"\u6dfb\u52a0\u7c7b\u522b")),React.createElement(g,{columns:this.state.columns,dataSource:this.state.data,pagination:{position:"bottom",showQuickJumper:!0,defaultPageSize:10,total:this.state.count,onChange:function(t){e.getGoodCategory.bind(e)(t)}}}),React.createElement("span",{className:"tran-y-40 d-block w-250"},"\u5171",this.state.count,"\u6761\u8bb0\u5f55 \u7b2c",this.state.page,"/",Math.ceil(this.state.count/10),"\u9875")))}},{key:"componentDidMount",value:function(){this.getGoodCategory()}},{key:"getGoodCategory",value:function(e){var t=this;Object(r.o)({page:e||this.state.page,page_size:10}).then(function(n){1==n.status?t.setState({data:n.data,page:e||t.state.page,count:n.count}):v.error({message:n.msg||"\u8acb\u6c42\u5931\u6557"})})}},{key:"categoryToggle",value:function(e,t,n){var a=this;Object(r.g)({id:e,is_show:t}).then(function(o){if(1==o.status){v.success({message:1==t?"\u663e\u793a\u6210\u529f":"\u9690\u85cf\u6210\u529f"});var c=a.state.data;c.forEach(function(n){n.id==e&&(n.is_show=t)}),a.setState({data:c}),n()}else v.error({message:"\u7f51\u7edc\u51fa\u9519"})})}}]),t}(React.Component),w=function(e){return{state:123}},R=function(e){return{search:function(e){}}};t.default=Object(u.connect)(w,R)(E);s()({})}});