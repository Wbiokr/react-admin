webpackJsonp([4],{157:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=a(66),s=a(65),o=a.n(s),i=a(10),m=(a(77),function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}()),u=antd,d=u.Input,f=u.Button,p=u.DatePicker,E=u.Table,R=u.Divider,g=u.Tag,b=u.Checkbox,h=u.Modal,v=u.notification,y=p.RangePicker,_=b.Group,w=[{label:"\u5b8c\u6210",value:"2"},{label:"\u4ea4\u6613\u4e2d",value:"1"},{label:"\u5df2\u53d6\u6d88",value:"0"}],k=function(e){function t(e){n(this,t);var a=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={count:0,current:1,data:[],isVisibleImportModal:!1,repayInfo:"",file:null,isUpload:!1,orderInfo:{},good_name:"",order_no:"",mobile:"",status:["0","1","2"],page:1,page_size:10,columns:[{title:"\u7528\u6237\u624b\u673a",dataIndex:"mobile",key:"mobile"},{title:"\u8d2d\u4e70\u65f6\u95f4",dataIndex:"create_time",key:"create_time"},{title:"\u8ba2\u5355\u7f16\u53f7",dataIndex:"order_no",key:"order_no"},{title:"\u5546\u54c1\u540d\u79f0",key:"good_name",render:function(e){var t=e.good_name;return React.createElement("p",{style:{maxWidth:"200px"}},t)}},{title:"\u5546\u54c1\u4ef7\u683c(\u5143)",dataIndex:"good_price",key:"good_price"},{title:"\u8ba2\u5355\u72b6\u6001",dataIndex:"status",key:"status",render:function(e){return React.createElement(g,{color:2==e?"green":1==e?"blue":"red"},2==e?"\u5b8c\u6210":1==e?"\u4ea4\u6613\u4e2d":"\u53d6\u6d88")}},{title:"\u64cd\u4f5c",key:"action",render:function(e){var t=e.status,n=(e.order_no,e.id);return React.createElement("span",null,React.createElement("a",{onClick:function(){a.showGoodDetail.bind(a)(n)}},"\u67e5\u770b"),React.createElement(R,{type:"vertical"}),2==t?React.createElement("a",{onClick:function(){Object(l.r)({order_id:n}).then(function(e){if(1==e.status){var t=e.data.remark;h.confirm({title:"\u4fee\u6539\u53d1\u8d27\u4fe1\u606f",content:React.createElement("div",null,React.createElement("span",null,"\u5907\u6ce8\u4fe1\u606f"),React.createElement(d.TextArea,{defaultValue:t,onChange:function(e){t=e.target.value.trim()}})),okText:"\u4fdd\u5b58",okType:"warning",cancelText:"\u53d6\u6d88",onOk:function(e){Object(l.i)({remark:t,order_id:n}).then(function(t){1==t.status?(v.success({message:"\u4fee\u6539\u6210\u529f"}),e()):v.error({message:t.msg||"\u4fee\u6539\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff01"})})}})}else v.error({message:"\u83b7\u53d6\u53d1\u8d27\u4fe1\u606f\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff01"})})}},"\u4fee\u6539\u53d1\u8d27\u4fe1\u606f"):1==t?React.createElement("a",{onClick:function(){h.confirm({title:"\u53d6\u6d88\u8ba2\u5355\u786e\u8ba4",content:"\u786e\u8ba4\u53d6\u6d88\u8be5\u7b14\u8ba2\u5355\u4ea4\u6613\uff0c\u53d6\u6d88\u540e\u6d88\u8d39\u91d1\u5c06\u9000\u56de\u7528\u6237\u5e10\u6237\u4e2d\uff1f",okText:"\u786e\u8ba4",okType:"danger",cancelText:"\u53d6\u6d88",onOk:function(e){Object(l.d)({order_id:n}).then(function(t){if(1==t.status){v.success({message:"\u53d6\u6d88\u6210\u529f"});var c=a.state.data;c.forEach(function(e){e.id==n&&(e.status="0")}),a.setState({data:c}),e()}else v.error({message:t.msg||"\u53d6\u6d88\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff01"})})},onCancel:function(){}})}},"\u53d6\u6d88\u8ba2\u5355"):null,1==t?React.createElement(R,{type:"vertical"}):null,1==t?React.createElement("a",{onClick:function(){var e="";a.setState({repayInfo:""}),h.confirm({title:"\u786e\u8ba4\u53d1\u8d27",content:React.createElement("div",null,React.createElement("span",null,"\u5907\u6ce8\u4fe1\u606f"),React.createElement(d.TextArea,{defaultValue:e,onChange:function(t){e=t.target.value}})),okText:"\u786e\u8ba4\u53d1\u8d27",cancelText:"\u53d6\u6d88",onOk:function(t){if(""==e.trim())return void v.warning({message:"\u5907\u6ce8\u4fe1\u606f\u4e0d\u80fd\u4e3a\u7a7a"});Object(l.j)({order_id:n,remark:e}).then(function(e){if(1==e.status){v.success({message:"\u53d1\u8d27\u6210\u529f"});var c=a.state.data;c.forEach(function(e){e.id==n&&(e.status="2")}),a.setState({data:c}),t()}else v.error({message:e.msg||"\u53d1\u8d27\u5931\u8d25,\u8bf7\u91cd\u8bd5\uff01"})})}})}},"\u786e\u8ba4\u53d1\u8d27"):null)}}]},a}return r(t,e),m(t,[{key:"render",value:function(){var e=this;return React.createElement("div",null,React.createElement("section",{className:"p-30 p-b-no"},React.createElement("h3",{className:"f-s-16 c-blue h-35 b-d8d8d8 b-no-t b-no-lr"},"\u8ba2\u5355\u7ba1\u7406")),React.createElement("section",{className:"p-30 p-b-no d-f"},React.createElement("div",{className:"m-r-20"},React.createElement("span",null,"\u8d2d\u4e70\u65f6\u95f4\uff1a"),React.createElement(y,{id:"rangePicker-order",format:"YYYY-MM-DD",placeholder:["\u5f00\u59cb\u65f6\u95f4","\u7ed3\u675f\u65f6\u95f4"]})),React.createElement("div",{className:"m-r-50"},React.createElement("span",{className:"d-b w-90"},"\u5546\u54c1\u540d\u79f0\uff1a"),React.createElement(d,{style:{width:150},placeholder:"\u8bf7\u8f93\u5165...",value:this.state.good_name,onChange:function(t){e.setState({good_name:t.target.value})}}))),React.createElement("section",{class:"d-f p-30 p-t-15 p-b-no"},React.createElement("div",{className:"m-r-50"},React.createElement("span",{className:"d-b w-90"},"\u8ba2\u5355\u7f16\u53f7\uff1a"),React.createElement(d,{style:{width:150},placeholder:"\u8bf7\u8f93\u5165...",value:this.state.order_no,onChange:function(t){e.setState({order_no:t.target.value})}})),React.createElement("div",{className:"m-r-50"},React.createElement("span",{className:"d-b w-90"},"\u7528\u6237\u624b\u673a\uff1a"),React.createElement(d,{style:{width:150},placeholder:"\u8bf7\u8f93\u5165...",value:this.state.mobile,onChange:function(t){e.setState({mobile:t.target.value})}})),React.createElement("div",null,React.createElement(f,{type:"primary",onClick:function(){e.getOrderList(1)}},"\u67e5 \u8be2"))),React.createElement("section",{class:"d-f p-30 p-t-15"},React.createElement("div",null,React.createElement("span",{className:"d-b w-90"},"\u8ba2\u5355\u72b6\u6001\uff1a"),React.createElement(_,{options:w,value:this.state.status,onChange:function(t){e.getOrderList(1,t)}}))),React.createElement("section",{className:"h-20",style:{background:"#f0f2f5"}}),React.createElement("section",{className:"p-30"},React.createElement("div",{class:"d-f f-end-center p-b-20"},React.createElement(f,{type:"primary",onClick:function(t){Object(l.m)({start_time:document.querySelector("#rangePicker-order").querySelectorAll("input")[0].value,end_time:document.querySelector("#rangePicker-order").querySelectorAll("input")[1].value,good_name:e.state.good_name,order_no:e.state.order_no,mobile:e.state.mobile,status_str:e.state.status.join(",")})}},"\u5bfc\u51fa\u6570\u636e"),"\xa0\xa0\xa0\xa0\xa0\xa0"),React.createElement(E,{columns:this.state.columns,dataSource:this.state.data,pagination:{position:"bottom",showQuickJumper:!0,defaultPageSize:10,total:this.state.count,onChange:function(t){e.getOrderList.bind(e)(t)}}}),React.createElement("span",{className:"tran-y-40 d-block w-250"},"\u5171",this.state.count,"\u6761\u8bb0\u5f55 \u7b2c",this.state.page,"/",Math.ceil(this.state.count/10),"\u9875")),React.createElement(h,{title:"\u6279\u91cf\u5bfc\u5165\u53d1\u8d27\u4fe1\u606f",okText:"\u63d0 \u4ea4",cancelText:"\u53d6 \u6d88",visible:this.state.isVisibleImportModal,onOk:function(){return e.state.file?e.state.isUpload?(e.setState({isVisibleImportModal:!1}),void h.info({title:"\u6279\u91cf\u53d1\u8d27\u7ed3\u679c",content:React.createElement("div",null,React.createElement("p",null,"\u6279\u91cf\u53d1\u8d27\u5904\u7406100\u7b14\uff0c\u6210\u529f100\u7b14\uff0c\u5931\u8d250\u7b14"))})):(v.warning({message:"\u8bf7\u4e0a\u4f20\u6587\u4ef6\u81f3\u670d\u52a1\u5668"}),!1):(v.warning({message:"\u8bf7\u5148\u9009\u62e9\u6587\u4ef6"}),!1)},onCancel:function(){e.setState({isVisibleImportModal:!1})}},React.createElement("form",{action:"",id:"form-file",style:{display:"inline"}},React.createElement("input",{type:"file",accept:".xls,.xlsx",placeholder:"\u8bf7\u9009\u62e9\u6587\u4ef6",onChange:function(t){e.setState({isUpload:!1});var a=t.target.files[0],n=a.name.split(".").reverse()[0].toLowerCase();"xls"==n||"xlsx"==n?e.setState({file:a}):(v.warning({message:"\u4ec5\u652f\u6301.xls,.xlsx\u683c\u5f0f\u8868\u683c"}),document.querySelector("#form-file").reset(),e.setState({file:null}))}})),React.createElement(f,{type:"primary",onClick:function(){if(!e.state.file)return v.warning({message:"\u8bf7\u5148\u9009\u62e9\u4e0a\u4f20\u7684\u6587\u4ef6"}),void e.setState({isUpload:!1});v.success({message:"\u6587\u4ef6\u5df2\u4e0a\u4f20\u81f3\u670d\u52a1\u5668"}),e.setState({isUpload:!0})}},"\u4e0a\u4f20\u6587\u4ef6"),"\xa0\xa0",React.createElement(f,{href:""},"\u4e0b\u8f7d\u9b54\u677f")))}},{key:"componentDidMount",value:function(){this.getOrderList(1)}},{key:"getOrderList",value:function(e,t){var a=this;Object(l.s)({start_time:document.querySelector("#rangePicker-order").querySelectorAll("input")[0].value,end_time:document.querySelector("#rangePicker-order").querySelectorAll("input")[1].value,good_name:this.state.good_name,order_no:this.state.order_no,mobile:this.state.mobile,status_str:t?t.join(","):this.state.status.join(","),page:e||this.state.page,page_size:10}).then(function(n){1==n.status?a.setState({page:e||a.state.page,status:t||a.state.status,data:n.data,count:n.count}):v.error({message:n.msg||"\u8bf7\u6c42\u5931\u8d25"})})}},{key:"showGoodDetail",value:function(e){var t=this;Object(l.r)({order_id:e}).then(function(e){1==e.status?(t.setState({orderInfo:e.data}),h.info({title:"\u67e5\u770b\u8be6\u60c5",okText:"\u5173\u95ed",width:800,content:React.createElement("div",{className:""},React.createElement("section",{className:"m-t-15"},React.createElement("h3",{className:"f-s-16 c-blue h-35 b-d8d8d8 b-no-t b-no-lr"},"\u7528\u6237\u4fe1\u606f"),React.createElement("main",{className:"clearfix"},React.createElement("p",{className:"f-l w-per-50 f-start-center"},React.createElement("span",{className:"w-110"},React.createElement(g,{color:"volcano"},"\u7528\u6237\u624b\u673a\uff1a")),React.createElement("span",null,t.state.orderInfo.receive_mobile)),React.createElement("p",{className:"f-l w-per-50 f-start-center"},React.createElement("span",{className:"w-110"},React.createElement(g,{color:"geekblue"},"\u6536\u8d27\u4eba\uff1a")),React.createElement("span",null,t.state.orderInfo.receive_name)),React.createElement("p",{className:"f-l w-per-100 f-start-center"},React.createElement("span",{className:"w-110"},React.createElement(g,{color:"green"},"\u6536\u8d27\u5730\u5740\uff1a")),React.createElement("span",null,t.state.orderInfo.province+t.state.orderInfo.city+t.state.orderInfo.area+t.state.orderInfo.address)))),React.createElement("section",null,React.createElement("h3",{className:"f-s-16 c-blue h-35 b-d8d8d8 b-no-t b-no-lr"},"\u8ba2\u5355\u4fe1\u606f"),React.createElement("main",{className:"clearfix"},React.createElement("p",{className:"f-l w-per-50 f-start-center"},React.createElement("span",{className:"w-110"},React.createElement(g,{color:"volcano"},"\u5546\u54c1\u540d\u79f0\uff1a")),React.createElement("span",{className:"m-w-200"},t.state.orderInfo.good_name)),React.createElement("p",{className:"f-l w-per-50 f-start-center"},React.createElement("span",{className:"w-110"},React.createElement(g,{color:"geekblue"},"\u5546\u54c1\u4ef7\u683c(\u5143)\uff1a")),React.createElement("span",null,t.state.orderInfo.good_price)),React.createElement("p",{className:"f-l w-per-50 f-start-center"},React.createElement("span",{className:"w-110"},React.createElement(g,{color:"green"},"\u8ba2\u5355\u91d1\u989d(\u5143)\uff1a")),React.createElement("span",null,t.state.orderInfo.good_price)),React.createElement("p",{className:"f-l w-per-50 f-start-center"},React.createElement("span",{className:"w-110"},React.createElement(g,{color:"volcano"},"\u8d2d\u4e70\u65f6\u95f4\uff1a")),React.createElement("span",null,t.state.orderInfo.create_time)),React.createElement("p",{className:"f-l w-per-50 f-start-center"},React.createElement("span",{className:"w-110"},React.createElement(g,{color:"geekblue"},"\u8ba2\u5355\u7f16\u53f7\uff1a")),React.createElement("span",null,t.state.orderInfo.order_no)),React.createElement("p",{className:"f-l w-per-50 f-start-center"},React.createElement("span",{className:"w-110"},React.createElement(g,{color:"green"},"\u8ba2\u5355\u72b6\u6001\uff1a")),React.createElement("span",null,0==t.state.orderInfo.status?"\u53d6\u6d88":1==t.state.orderInfo.status?"\u4ea4\u6613\u4e2d":"\u5b8c\u6210")))),React.createElement("section",{style:{display:2==t.state.orderInfo.status?"block":"none"}},React.createElement("h3",{className:"f-s-16 c-blue h-35 b-d8d8d8 b-no-t b-no-lr"},"\u53d1\u8d27\u4fe1\u606f"),React.createElement("main",{className:"clearfix"},React.createElement("p",{className:"f-l w-per-50 f-start-center"},React.createElement("span",{className:"w-110"},React.createElement(g,{color:"volcano"},"\u53d1\u8d27\u65f6\u95f4\uff1a")),React.createElement("span",null,t.state.orderInfo.ship_time)),React.createElement("p",{className:"f-l w-per-50 d-f"},React.createElement("span",{className:"w-110"},React.createElement(g,{color:"green"},"\u5907\u6ce8\u4fe1\u606f\uff1a")),React.createElement("span",{className:"m-w-200"},t.state.orderInfo.remark)))))})):v.error({message:e.msg||"\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5!"})})}}]),t}(React.Component),N=function(e){return{state:123}},x=function(e){return{search:function(e){}}};t.default=Object(i.connect)(N,x)(k);o()({})}});